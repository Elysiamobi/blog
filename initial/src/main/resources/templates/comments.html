<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Comments - My Blog</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>

<header>
  <h1>My Blog</h1>
  <nav>
    <a href="index.html">Home</a>
    <a href="login.html">Login</a>
    <a href="register.html">Register</a>
    <a href="create.html">Publish Article</a>
  </nav>
</header>

<main>
  <h2>My Comments</h2>
  <div id="comments">
    <!-- User comments will be displayed here -->
  </div>
</main>

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
  // Fetch user's comments
  axios.get('http://localhost:8080/api/users/me/comments')
          .then(response => {
            const comments = response.data;
            const commentsContainer = document.getElementById('comments');
            comments.forEach(comment => {
              const commentElement = document.createElement('div');
              commentElement.classList.add('comment');
              commentElement.innerHTML = `
          <p>${comment.content}</p>
          <button onclick="deleteComment(${comment.id})">Delete</button>
        `;
              commentsContainer.appendChild(commentElement);
            });
          });

  // Handle comment deletion
  function deleteComment(commentId) {
    axios.delete(`http://localhost:8080/api/comments/${commentId}`)
            .then(function () {
              alert('Comment deleted successfully!');
              window.location.reload(); // Reload the page to reflect changes
            })
            .catch(function () {
              alert('Failed to delete comment.');
            });
  }
</script>

</body>
</html>
